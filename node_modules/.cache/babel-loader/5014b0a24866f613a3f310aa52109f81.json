{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _lodash = require(\"lodash\");\n\nvar _core = require(\"@buffetjs/core\");\n\nvar _strapiHelperPlugin = require(\"strapi-helper-plugin\");\n\nvar _reactIntl = require(\"react-intl\");\n\nvar _ImportModal = _interopRequireDefault(require(\"../ImportModal\"));\n\nvar _pluginId = _interopRequireDefault(require(\"../../pluginId\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar OEmbedField = function OEmbedField(_ref) {\n  var inputDescription = _ref.inputDescription,\n      errors = _ref.errors,\n      label = _ref.label,\n      name = _ref.name,\n      noErrorsDescription = _ref.noErrorsDescription,\n      onChange = _ref.onChange,\n      value = _ref.value;\n\n  var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      isOpen = _useState2[0],\n      setIsOpen = _useState2[1]; // Parse the value from string to JSON\n\n\n  var parseValue = function parseValue(value) {\n    var parsedValue = null;\n\n    try {\n      parsedValue = JSON.parse(value);\n    } catch (_unused) {}\n\n    return parsedValue;\n  };\n\n  var _useState3 = (0, _react.useState)(parseValue(value)),\n      _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n      draftValue = _useState4[0],\n      setDraftValue = _useState4[1];\n\n  (0, _react.useEffect)(function () {\n    setDraftValue(parseValue(value));\n  }, [value]);\n  var hasValue = (0, _react.useMemo)(function () {\n    return (0, _lodash.isObject)(draftValue) && draftValue.url ? true : false;\n  }, [draftValue]);\n  var spacer = !(0, _lodash.isEmpty)(inputDescription) ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: {\n      height: '.4rem'\n    }\n  }) : /*#__PURE__*/_react[\"default\"].createElement(\"div\", null);\n\n  if (!noErrorsDescription && !(0, _lodash.isEmpty)(errors)) {\n    spacer = /*#__PURE__*/_react[\"default\"].createElement(\"div\", null);\n  }\n\n  var openModal = function openModal() {\n    setIsOpen(true);\n  };\n\n  var onImport = function onImport(data) {\n    onChange({\n      target: {\n        name: name,\n        value: (0, _lodash.isObject)(data) ? JSON.stringify(data) : null\n      }\n    });\n  };\n\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.Label, {\n    htmlFor: name,\n    message: label,\n    style: {\n      marginBottom: 10\n    }\n  }), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: {\n      border: '1px solid #e3e9f3',\n      padding: '15px',\n      borderRadius: '2px'\n    }\n  }, hasValue && /*#__PURE__*/_react[\"default\"].createElement(\"p\", null, draftValue.title && /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    style: {\n      fontSize: '1.9rem'\n    }\n  }, draftValue.title), /*#__PURE__*/_react[\"default\"].createElement(\"br\", null)), /*#__PURE__*/_react[\"default\"].createElement(\"a\", {\n    href: draftValue.url,\n    target: \"_blank\"\n  }, draftValue.url)), /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, /*#__PURE__*/_react[\"default\"].createElement(_core.Button, {\n    color: \"primary\",\n    onClick: openModal\n  }, hasValue && /*#__PURE__*/_react[\"default\"].createElement(_reactIntl.FormattedMessage, {\n    id: \"\".concat(_pluginId[\"default\"], \".form.button.edit\")\n  }), !hasValue && /*#__PURE__*/_react[\"default\"].createElement(_reactIntl.FormattedMessage, {\n    id: \"\".concat(_pluginId[\"default\"], \".form.button.import\")\n  })), hasValue && /*#__PURE__*/_react[\"default\"].createElement(_core.Button, {\n    color: \"delete\",\n    onClick: function onClick() {\n      return onImport(null);\n    },\n    style: {\n      marginLeft: '15px'\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(_reactIntl.FormattedMessage, {\n    id: \"\".concat(_pluginId[\"default\"], \".form.button.delete\")\n  })))), /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.InputDescription, {\n    message: inputDescription,\n    style: !(0, _lodash.isEmpty)(inputDescription) ? {\n      marginTop: '1.4rem'\n    } : {}\n  }), /*#__PURE__*/_react[\"default\"].createElement(_strapiHelperPlugin.InputErrors, {\n    errors: !noErrorsDescription && errors || [],\n    name: name\n  }), spacer, /*#__PURE__*/_react[\"default\"].createElement(_ImportModal[\"default\"], {\n    isOpen: isOpen,\n    value: draftValue,\n    onToggle: function onToggle() {\n      return setIsOpen(!isOpen);\n    },\n    onImport: onImport\n  }));\n};\n\nOEmbedField.defaultProps = {\n  errors: [],\n  inputDescription: null,\n  label: '',\n  noErrorsDescription: false,\n  value: ''\n};\nOEmbedField.propTypes = {\n  errors: _propTypes[\"default\"].array,\n  inputDescription: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].func, _propTypes[\"default\"].shape({\n    id: _propTypes[\"default\"].string,\n    params: _propTypes[\"default\"].object\n  })]),\n  label: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].func, _propTypes[\"default\"].shape({\n    id: _propTypes[\"default\"].string,\n    params: _propTypes[\"default\"].object\n  })]),\n  name: _propTypes[\"default\"].string.isRequired,\n  noErrorsDescription: _propTypes[\"default\"].bool,\n  onChange: _propTypes[\"default\"].func.isRequired,\n  value: _propTypes[\"default\"].string\n};\nvar _default = OEmbedField;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/home/zenack/Trabajo/Strapi-concept/.cache/plugins/strapi-plugin-oembed/admin/src/components/OEmbedField/index.js"],"names":["OEmbedField","inputDescription","errors","label","name","noErrorsDescription","onChange","value","isOpen","setIsOpen","parseValue","parsedValue","JSON","parse","draftValue","setDraftValue","hasValue","url","spacer","height","openModal","onImport","data","target","stringify","marginBottom","border","padding","borderRadius","title","fontSize","pluginId","marginLeft","marginTop","defaultProps","propTypes","PropTypes","array","oneOfType","string","func","shape","id","params","object","isRequired","bool"],"mappings":"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","sourcesContent":["import React, { useState, useMemo, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { isEmpty, isObject } from 'lodash';\nimport { Button } from '@buffetjs/core';\nimport { Label, InputDescription, InputErrors } from 'strapi-helper-plugin';\nimport { FormattedMessage } from 'react-intl';\nimport ImportModal from '../ImportModal';\nimport pluginId from '../../pluginId';\n\nconst OEmbedField = ({\n  inputDescription,\n  errors,\n  label,\n  name,\n  noErrorsDescription,\n  onChange,\n  value,\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n\n  // Parse the value from string to JSON\n  const parseValue = (value) => {\n    let parsedValue = null; \n\n    try {\n      parsedValue = JSON.parse(value);\n    } catch {}\n\n    return parsedValue;\n  };\n\n  const [draftValue, setDraftValue] = useState(parseValue(value));\n\n  useEffect(() => {\n    setDraftValue(parseValue(value));\n  }, [value])\n\n  const hasValue = useMemo(() => isObject(draftValue) && draftValue.url ? true : false, [draftValue]);\n\n  let spacer = !isEmpty(inputDescription) ? <div style={{ height: '.4rem' }} /> : <div />;\n\n  if (!noErrorsDescription && !isEmpty(errors)) {\n    spacer = <div />;\n  }\n\n  const openModal = () => {\n    setIsOpen(true);\n  };\n\n  const onImport = (data) => {\n    onChange({\n      target: {\n        name: name,\n        value: isObject(data) ? JSON.stringify(data) : null,\n      },\n    });\n  };\n\n  return (\n    <div>\n      <Label htmlFor={name} message={label} style={{ marginBottom: 10 }} />\n      <div style={{ border: '1px solid #e3e9f3', padding: '15px', borderRadius: '2px'}}>\n        { hasValue && (\n          <p>\n            {draftValue.title && (\n              <>\n                <span style={{fontSize: '1.9rem'}}>{draftValue.title}</span>\n                <br />\n              </>\n            )}\n            <a href={draftValue.url} target=\"_blank\">{draftValue.url}</a>\n          </p>\n        ) }\n        <div>\n          <Button color=\"primary\" onClick={openModal}>\n            { hasValue && (\n              <FormattedMessage id={`${pluginId}.form.button.edit`} />\n            ) }\n            { !hasValue && (\n              <FormattedMessage id={`${pluginId}.form.button.import`} />\n            ) }\n          </Button>\n          {hasValue && (\n            <Button color=\"delete\" onClick={() => onImport(null)} style={{marginLeft: '15px'}}>\n              <FormattedMessage id={`${pluginId}.form.button.delete`} />\n            </Button>\n          ) }\n        </div>\n      </div>\n      <InputDescription\n        message={inputDescription}\n        style={!isEmpty(inputDescription) ? { marginTop: '1.4rem' } : {}}\n      />\n      <InputErrors errors={(!noErrorsDescription && errors) || []} name={name} />\n      {spacer}\n      <ImportModal isOpen={isOpen} value={draftValue} onToggle={() => setIsOpen(!isOpen)} onImport={onImport} />\n    </div>\n  );\n};\n\nOEmbedField.defaultProps = {\n  errors: [],\n  inputDescription: null,\n  label: '',\n  noErrorsDescription: false,\n  value: '',\n};\n\nOEmbedField.propTypes = {\n  errors: PropTypes.array,\n  inputDescription: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.func,\n    PropTypes.shape({\n      id: PropTypes.string,\n      params: PropTypes.object,\n    }),\n  ]),\n  label: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.func,\n    PropTypes.shape({\n      id: PropTypes.string,\n      params: PropTypes.object,\n    }),\n  ]),\n  name: PropTypes.string.isRequired,\n  noErrorsDescription: PropTypes.bool,\n  onChange: PropTypes.func.isRequired,\n  value: PropTypes.string,\n};\n\nexport default OEmbedField;\n"]},"metadata":{},"sourceType":"script"}